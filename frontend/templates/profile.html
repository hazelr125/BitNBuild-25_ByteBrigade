<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - GigCampus</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="index.html"><h2>GigCampus</h2></a>
            </div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="services.html" class="nav-link">Services</a>
                <a href="about.html" class="nav-link">About</a>
                <a href="contact.html" class="nav-link">Contact</a>
            </div>
            <div class="nav-buttons">
                <div class="user-menu">
                    <div class="user-avatar">
                        <div class="avatar-placeholder">
                            <i class="fas fa-user"></i>
                        </div>
                    </div>
                    <div class="user-dropdown">
                        <a href="dashboard.html" class="dropdown-item">
                            <i class="fas fa-tachometer-alt"></i>
                            Dashboard
                        </a>
                        <a href="profile.html" class="dropdown-item active">
                            <i class="fas fa-user-edit"></i>
                            Profile
                        </a>
                        <a href="chat.html" class="dropdown-item">
                            <i class="fas fa-comments"></i>
                            Messages
                        </a>
                        <a href="earnings.html" class="dropdown-item">
                            <i class="fas fa-rupee-sign"></i>
                            Earnings
                        </a>
                        <a href="settings.html" class="dropdown-item">
                            <i class="fas fa-cog"></i>
                            Settings
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="index.html" class="dropdown-item">
                            <i class="fas fa-sign-out-alt"></i>
                            Logout
                        </a>
                    </div>
                </div>
            </div>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Profile Section -->
    <section class="profile-section">
        <div class="container">
            <div class="profile-grid">
                <!-- Sidebar -->
                <div class="profile-sidebar">
                    <div class="sidebar-menu">
                        <a href="dashboard.html" class="sidebar-item">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Dashboard</span>
                        </a>
                        <a href="profile.html" class="sidebar-item active">
                            <i class="fas fa-user-edit"></i>
                            <span>Profile</span>
                        </a>
                        <a href="my-services.html" class="sidebar-item">
                            <i class="fas fa-briefcase"></i>
                            <span>My Services</span>
                        </a>
                        <a href="bookings.html" class="sidebar-item">
                            <i class="fas fa-calendar-check"></i>
                            <span>Bookings</span>
                        </a>
                        <a href="chat.html" class="sidebar-item">
                            <i class="fas fa-comments"></i>
                            <span>Messages</span>
                            <span class="notification-badge">3</span>
                        </a>
                        <a href="earnings.html" class="sidebar-item">
                            <i class="fas fa-rupee-sign"></i>
                            <span>Earnings</span>
                        </a>
                        <a href="reviews.html" class="sidebar-item">
                            <i class="fas fa-star"></i>
                            <span>Reviews</span>
                        </a>
                        <a href="settings.html" class="sidebar-item">
                            <i class="fas fa-cog"></i>
                            <span>Settings</span>
                        </a>
                    </div>
                </div>

                <!-- Main Content -->
                <div class="profile-main">
                    <!-- Profile Header -->
                    <div class="profile-header">
                        <div class="profile-cover">
                            <div class="cover-image">
                                <div class="cover-placeholder">
                                    <i class="fas fa-image"></i>
                                </div>
                                <button class="cover-edit-btn">
                                    <i class="fas fa-camera"></i>
                                </button>
                            </div>
                        </div>
                        <div class="profile-info">
                            <div class="profile-avatar-section">
                                <div class="profile-avatar">
                                    <div class="avatar-placeholder large">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <button class="avatar-edit-btn">
                                        <i class="fas fa-camera"></i>
                                    </button>
                                </div>
                                <div class="profile-details">
                                    <h1 id="profile-name">Loading...</h1>
                                    <p class="profile-title" id="profile-title">Student</p>
                                    <p class="profile-location">
                                        <i class="fas fa-map-marker-alt"></i>
                                        <span id="profile-university">University</span>
                                    </p>
                                    <div class="profile-stats">
                                        <div class="stat">
                                            <span class="stat-number" id="profile-rating">0.0</span>
                                            <span class="stat-label">Rating</span>
                                        </div>
                                        <div class="stat">
                                            <span class="stat-number" id="profile-reviews">0</span>
                                            <span class="stat-label">Reviews</span>
                                        </div>
                                        <div class="stat">
                                            <span class="stat-number">24</span>
                                            <span class="stat-label">Students Helped</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="profile-actions">
                                <button class="btn-outline">
                                    <i class="fas fa-share"></i>
                                    Share Profile
                                </button>
                                <button class="btn-primary">
                                    <i class="fas fa-edit"></i>
                                    Edit Profile
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Profile Content -->
                    <div class="profile-content">
                        <div class="profile-tabs">
                            <button class="tab-btn active" data-tab="about">About</button>
                            <button class="tab-btn" data-tab="services">Services</button>
                            <button class="tab-btn" data-tab="reviews">Reviews</button>
                            <button class="tab-btn" data-tab="portfolio">Portfolio</button>
                        </div>

                        <!-- About Tab -->
                        <div class="tab-content active" id="about">
                            <div class="profile-card">
                                <h3>About Me</h3>
                                <p id="about-text">I'm a Computer Science student at IIT Bombay with a passion for teaching and helping fellow students succeed. I specialize in mathematics, programming, and problem-solving. With 3+ years of tutoring experience, I've helped over 24 students improve their grades and understanding of complex concepts.</p>
                                
                                <div class="profile-details-grid">
                                    <div class="detail-item">
                                        <label>Education</label>
                                        <p id="education-info">B.Tech Computer Science, IIT Bombay (2022-2026)</p>
                                    </div>
                                    <div class="detail-item">
                                        <label>Specialization</label>
                                        <p id="specialization-info">Mathematics, Programming, Data Structures</p>
                                    </div>
                                    <div class="detail-item">
                                        <label>Experience</label>
                                        <p>3+ years tutoring experience</p>
                                    </div>
                                    <div class="detail-item">
                                        <label>Languages</label>
                                        <p>English, Hindi, Gujarati</p>
                                    </div>
                                </div>
                            </div>

                            <div class="profile-card">
                                <h3>Skills & Expertise</h3>
                                <div class="skills-grid">
                                    <div class="skill-item">
                                        <span class="skill-name">Calculus</span>
                                        <div class="skill-level">
                                            <div class="skill-bar" style="width: 95%"></div>
                                        </div>
                                        <span class="skill-percentage">95%</span>
                                    </div>
                                    <div class="skill-item">
                                        <span class="skill-name">Linear Algebra</span>
                                        <div class="skill-level">
                                            <div class="skill-bar" style="width: 90%"></div>
                                        </div>
                                        <span class="skill-percentage">90%</span>
                                    </div>
                                    <div class="skill-item">
                                        <span class="skill-name">Python Programming</span>
                                        <div class="skill-level">
                                            <div class="skill-bar" style="width: 88%"></div>
                                        </div>
                                        <span class="skill-percentage">88%</span>
                                    </div>
                                    <div class="skill-item">
                                        <span class="skill-name">Data Structures</span>
                                        <div class="skill-level">
                                            <div class="skill-bar" style="width: 92%"></div>
                                        </div>
                                        <span class="skill-percentage">92%</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Services Tab -->
                        <div class="tab-content" id="services">
                            <div class="services-grid">
                                <div class="service-card">
                                    <div class="service-header">
                                        <h4>Calculus Tutoring</h4>
                                        <span class="service-status active">Active</span>
                                    </div>
                                    <p>Comprehensive calculus tutoring covering derivatives, integrals, and applications.</p>
                                    <div class="service-meta">
                                        <span><i class="fas fa-rupee-sign"></i> ₹1000/hr</span>
                                        <span><i class="fas fa-clock"></i> 2 hours</span>
                                        <span><i class="fas fa-users"></i> 15 students</span>
                                    </div>
                                    <div class="service-actions">
                                        <button class="btn-outline btn-small">Edit</button>
                                        <button class="btn-primary btn-small">View Details</button>
                                    </div>
                                </div>

                                <div class="service-card">
                                    <div class="service-header">
                                        <h4>Python Programming</h4>
                                        <span class="service-status active">Active</span>
                                    </div>
                                    <p>Learn Python from basics to advanced concepts with hands-on projects.</p>
                                    <div class="service-meta">
                                        <span><i class="fas fa-rupee-sign"></i> ₹1200/hr</span>
                                        <span><i class="fas fa-clock"></i> 1.5 hours</span>
                                        <span><i class="fas fa-users"></i> 8 students</span>
                                    </div>
                                    <div class="service-actions">
                                        <button class="btn-outline btn-small">Edit</button>
                                        <button class="btn-primary btn-small">View Details</button>
                                    </div>
                                </div>

                                <div class="service-card">
                                    <div class="service-header">
                                        <h4>Data Structures</h4>
                                        <span class="service-status inactive">Inactive</span>
                                    </div>
                                    <p>Master data structures and algorithms with practical examples.</p>
                                    <div class="service-meta">
                                        <span><i class="fas fa-rupee-sign"></i> ₹1500/hr</span>
                                        <span><i class="fas fa-clock"></i> 2 hours</span>
                                        <span><i class="fas fa-users"></i> 5 students</span>
                                    </div>
                                    <div class="service-actions">
                                        <button class="btn-outline btn-small">Edit</button>
                                        <button class="btn-primary btn-small">View Details</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Reviews Tab -->
                        <div class="tab-content" id="reviews">
                            <div class="reviews-summary">
                                <div class="rating-overview">
                                    <div class="rating-score">
                                        <span class="score">4.8</span>
                                        <div class="stars">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                        </div>
                                        <p>Based on 127 reviews</p>
                                    </div>
                                    <div class="rating-breakdown">
                                        <div class="rating-bar">
                                            <span>5</span>
                                            <div class="bar">
                                                <div class="fill" style="width: 85%"></div>
                                            </div>
                                            <span>108</span>
                                        </div>
                                        <div class="rating-bar">
                                            <span>4</span>
                                            <div class="bar">
                                                <div class="fill" style="width: 12%"></div>
                                            </div>
                                            <span>15</span>
                                        </div>
                                        <div class="rating-bar">
                                            <span>3</span>
                                            <div class="bar">
                                                <div class="fill" style="width: 2%"></div>
                                            </div>
                                            <span>3</span>
                                        </div>
                                        <div class="rating-bar">
                                            <span>2</span>
                                            <div class="bar">
                                                <div class="fill" style="width: 1%"></div>
                                            </div>
                                            <span>1</span>
                                        </div>
                                        <div class="rating-bar">
                                            <span>1</span>
                                            <div class="bar">
                                                <div class="fill" style="width: 0%"></div>
                                            </div>
                                            <span>0</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="reviews-list">
                                <div class="review-item">
                                    <div class="review-header">
                                        <div class="reviewer-info">
                                            <div class="reviewer-avatar">
                                                <div class="avatar-placeholder">
                                                    <i class="fas fa-user"></i>
                                                </div>
                                            </div>
                                            <div class="reviewer-details">
                                                <h4>Sarah Chen</h4>
                                                <p>Computer Science, IIT Bombay</p>
                                            </div>
                                        </div>
                                        <div class="review-rating">
                                            <div class="stars">
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                            </div>
                                            <span class="review-date">2 days ago</span>
                                        </div>
                                    </div>
                                    <div class="review-content">
                                        <p>Arjun is an excellent tutor! He explained calculus concepts in a way that finally made sense to me. His patience and teaching style helped me improve my grades significantly.</p>
                                    </div>
                                </div>

                                <div class="review-item">
                                    <div class="review-header">
                                        <div class="reviewer-info">
                                            <div class="reviewer-avatar">
                                                <div class="avatar-placeholder">
                                                    <i class="fas fa-user"></i>
                                                </div>
                                            </div>
                                            <div class="reviewer-details">
                                                <h4>Rahul Kumar</h4>
                                                <p>Mechanical Engineering, IIT Delhi</p>
                                            </div>
                                        </div>
                                        <div class="review-rating">
                                            <div class="stars">
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                            </div>
                                            <span class="review-date">1 week ago</span>
                                        </div>
                                    </div>
                                    <div class="review-content">
                                        <p>Great Python programming sessions! Arjun helped me understand complex algorithms and data structures. Highly recommended for anyone learning programming.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Portfolio Tab -->
                        <div class="tab-content" id="portfolio">
                            <div class="portfolio-grid">
                                <div class="portfolio-item">
                                    <div class="portfolio-image">
                                        <div class="image-placeholder">
                                            <i class="fas fa-image"></i>
                                        </div>
                                    </div>
                                    <div class="portfolio-content">
                                        <h4>Calculus Problem Solutions</h4>
                                        <p>Step-by-step solutions to complex calculus problems</p>
                                        <div class="portfolio-meta">
                                            <span><i class="fas fa-eye"></i> 150 views</span>
                                            <span><i class="fas fa-heart"></i> 25 likes</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="portfolio-item">
                                    <div class="portfolio-image">
                                        <div class="image-placeholder">
                                            <i class="fas fa-code"></i>
                                        </div>
                                    </div>
                                    <div class="portfolio-content">
                                        <h4>Python Projects</h4>
                                        <p>Data analysis and machine learning projects</p>
                                        <div class="portfolio-meta">
                                            <span><i class="fas fa-eye"></i> 200 views</span>
                                            <span><i class="fas fa-heart"></i> 35 likes</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="portfolio-item">
                                    <div class="portfolio-image">
                                        <div class="image-placeholder">
                                            <i class="fas fa-chart-line"></i>
                                        </div>
                                    </div>
                                    <div class="portfolio-content">
                                        <h4>Algorithm Visualizations</h4>
                                        <p>Interactive visualizations of sorting algorithms</p>
                                        <div class="portfolio-meta">
                                            <span><i class="fas fa-eye"></i> 300 views</span>
                                            <span><i class="fas fa-heart"></i> 45 likes</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>GigCampus</h3>
                    <p>Connecting students across India to create opportunities and build communities.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Services</h4>
                    <ul>
                        <li><a href="academic-tutoring.html">Tutoring</a></li>
                        <li><a href="creative-design.html">Design</a></li>
                        <li><a href="tech-services.html">Programming</a></li>
                        <li><a href="photography.html">Photography</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#">Safety</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Contact</h4>
                    <ul>
                        <li><a href="#">hello@gigcampus.in</a></li>
                        <li><a href="#">+91 98765 43210</a></li>
                        <li><a href="#">Mumbai, Maharashtra</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 GigCampus. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="/static/js/api.js"></script>
    <script src="/static/js/auth.js"></script>
    <script src="/static/js/script.js"></script>
    
    <script>
        // Profile specific JavaScript
        document.addEventListener('DOMContentLoaded', async () => {
            // Check if user is authenticated
            if (!api.isAuthenticated()) {
                showNotification('Please sign in to access your profile', 'warning');
                setTimeout(() => {
                    window.location.href = '/templates/signin.html';
                }, 2000);
                return;
            }

            try {
                // Show loading state
                showLoading(true);
                
                // Load user profile
                const userProfile = await api.getProfile();
                console.log('User profile:', userProfile);
                
                // Update profile information
                updateProfileDisplay(userProfile);
                
                showLoading(false);
                
            } catch (error) {
                showLoading(false);
                console.error('Profile load error:', error);
                
                if (error.message.includes('401') || error.message.includes('Unauthorized')) {
                    showNotification('Session expired. Please sign in again.', 'error');
                    api.clearToken();
                    setTimeout(() => {
                        window.location.href = '/templates/signin.html';
                    }, 2000);
                } else {
                    showNotification('Error loading profile data', 'error');
                }
            }
        });
        
        function updateProfileDisplay(userProfile) {
            // Update basic profile info
            const profileName = document.getElementById('profile-name');
            const profileTitle = document.getElementById('profile-title');
            const profileUniversity = document.getElementById('profile-university');
            const profileRating = document.getElementById('profile-rating');
            const profileReviews = document.getElementById('profile-reviews');
            
            // Set user name
            const fullName = userProfile.firstName && userProfile.lastName ? 
                `${userProfile.firstName} ${userProfile.lastName}` : 
                userProfile.username;
            profileName.textContent = fullName;
            
            // Set profile title based on course
            if (userProfile.course) {
                profileTitle.textContent = `${userProfile.course} Student`;
            } else {
                profileTitle.textContent = userProfile.isStudent ? 'Student' : 'Professional';
            }
            
            // Set university
            if (userProfile.university) {
                profileUniversity.textContent = userProfile.university;
            } else {
                profileUniversity.textContent = 'University';
            }
            
            // Set stats
            profileRating.textContent = userProfile.reputation ? userProfile.reputation.toFixed(1) : '0.0';
            profileReviews.textContent = '0'; // TODO: Implement when reviews are added
            
            // Update about section if it exists
            const aboutText = document.getElementById('about-text');
            if (aboutText) {
                aboutText.textContent = userProfile.bio || `I'm a ${userProfile.course || 'student'} at ${userProfile.university || 'university'} with a passion for teaching and helping fellow students succeed.`;
            }

            // Update education info
            const educationInfo = document.getElementById('education-info');
            if (educationInfo) {
                educationInfo.textContent = userProfile.course && userProfile.university ? 
                    `${userProfile.course}, ${userProfile.university}` : 
                    'Education information not provided';
            }

            // Update specialization info
            const specializationInfo = document.getElementById('specialization-info');
            if (specializationInfo) {
                specializationInfo.textContent = userProfile.skills || 'Specialization not specified';
            }
            
            // Update contact info
            const contactEmail = document.getElementById('contact-email');
            if (contactEmail) {
                contactEmail.textContent = userProfile.email;
            }
            
            const contactPhone = document.getElementById('contact-phone');
            if (contactPhone && userProfile.phone) {
                contactPhone.textContent = userProfile.phone;
            }
        }
    </script>
</body>
</html>
